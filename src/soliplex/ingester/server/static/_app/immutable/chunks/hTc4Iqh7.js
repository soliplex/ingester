var E=Object.defineProperty;var S=(s,t,e)=>t in s?E(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var w=(s,t,e)=>S(s,typeof t!="symbol"?t+"":t,e);import{c as g,x as d,e as m,h as p,k as u,r as f,l as y,m as _,H as W}from"./DCSobnyE.js";const A="/api/v1",P=3e4;class k extends Error{constructor(t,e,r){super(t),this.statusCode=e,this.endpoint=r,this.name="ApiError"}}class v extends Error{constructor(t,e){super(t),this.endpoint=e,this.name="NetworkError"}}function U(s,t){throw s instanceof Response?new k(`HTTP ${s.status}: ${s.statusText}`,s.status,t):s instanceof TypeError&&s.message.includes("fetch")?new v("Network error: Unable to connect to API",t):s instanceof Error?s:new Error("Unknown error occurred")}function N(s){return s instanceof k?`API Error (${s.statusCode}): ${s.message}`:s instanceof v?`Network Error: ${s.message}`:s instanceof Error?s.message:"An unknown error occurred"}class R{constructor(t=A,e=P){w(this,"baseUrl");w(this,"timeout");this.baseUrl=t,this.timeout=e}async fetchWithTimeout(t,e){const r=new AbortController,n=setTimeout(()=>r.abort(),this.timeout);try{const o=await fetch(t,{...e,signal:r.signal});if(clearTimeout(n),!o.ok){const c=await o.json().catch(()=>({}));throw new Error(c.error||o.statusText)}return o}catch(o){clearTimeout(n),U(o,t)}}async get(t,e){let r=`${this.baseUrl}${t}`;if(e){const o=new URLSearchParams;Object.entries(e).forEach(([c,l])=>{o.append(c,String(l))}),r+=`?${o.toString()}`}return(await this.fetchWithTimeout(r)).json()}async post(t,e){const r=e instanceof FormData;return(await this.fetchWithTimeout(`${this.baseUrl}${t}`,{method:"POST",headers:r?{}:{"Content-Type":"application/json"},body:r?e:JSON.stringify(e)})).json()}async getBatches(){return this.get("/batch/")}async getBatchStatus(t){return this.get("/batch/status",{batch_id:t})}async getDocuments(t,e){const r={};return t&&(r.batch_id=t),e&&(r.source=e),this.get("/document/",r)}async getWorkflowRuns(t,e,r){const n={};return t&&(n.batch_id=t),e&&(n.page=e.page,n.rows_per_page=e.rows_per_page),r&&(n.include_doc_info=!0),this.get("/workflow/",n)}async getWorkflowRunsByStatus(t,e,r,n){const o={status:t};return e&&(o.batch_id=e),r&&(o.page=r.page,o.rows_per_page=r.rows_per_page),n&&(o.include_doc_info=!0),this.get("/workflow/by-status",o)}async getWorkflowRunDetails(t){return this.get(`/workflow/runs/${t}`)}async getWorkflowSteps(t){return this.get("/workflow/steps",{status:t})}async getWorkflowLifecycleHistory(t){return this.get(`/workflow/runs/${t}/lifecycle`)}async getWorkflowDefinitions(){return this.get("/workflow/definitions")}async getWorkflowDefinition(t){return this.get(`/workflow/definitions/${t}`)}async getParamSets(){return this.get("/workflow/param-sets")}async getParamSet(t){return this.get(`/workflow/param-sets/${t}`)}async getParamSetsByTarget(t){return this.get(`/workflow/param-sets/target/${t}`)}async getRunGroups(t){const e=t?{batch_id:t}:void 0;return this.get("/workflow/run-groups",e)}async getRunGroup(t){return this.get(`/workflow/run-groups/${t}`)}async getRunGroupStats(t){return this.get(`/workflow/run-groups/${t}/stats`)}async startWorkflows(t,e,r,n){const o=new URLSearchParams;return o.append("batch_id",String(t)),e&&o.append("workflow_definition_id",e),r!==void 0&&o.append("priority",String(r)),n&&o.append("param_id",n),(await this.fetchWithTimeout(`${this.baseUrl}/batch/start-workflows`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()})).json()}}const O=new R;var $=g('<p class="mt-1 text-sm text-gray-500"> </p>'),j=g('<div class="ml-4 mt-2 flex-shrink-0"><!></div>'),C=g('<div class="border-b border-gray-200 bg-white px-4 py-5 sm:px-6 lg:px-8"><div class="-ml-4 -mt-2 flex flex-wrap items-center justify-between sm:flex-nowrap"><div class="ml-4 mt-2"><h1 class="text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl"> </h1> <!></div> <!></div></div>');function H(s,t){var e=C(),r=u(e),n=u(r),o=u(n),c=u(o,!0);f(o);var l=y(o,2);{var b=a=>{var i=$(),h=u(i,!0);f(i),m(()=>_(h,t.description)),p(a,i)};d(l,a=>{t.description&&a(b)})}f(n);var x=y(n,2);{var T=a=>{var i=j(),h=u(i);W(h,()=>t.actions),f(i),p(a,i)};d(x,a=>{t.actions&&a(T)})}f(r),f(e),m(()=>_(c,t.title)),p(s,e)}export{H as P,O as a,N as g};

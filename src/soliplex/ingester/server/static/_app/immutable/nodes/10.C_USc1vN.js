import{a as Q,P as se}from"../chunks/BOAlGdYI.js";import{R as B}from"../chunks/DhxlaAyh.js";import{d as $,f as b,s as D,a as h,c as oe}from"../chunks/j3K8jUZk.js";import{p as J,c as l,s as m,r as s,t as U,g as t,a as K,n as ie,f as ee,u as W}from"../chunks/Dj7rAsuq.js";import{i as H}from"../chunks/C64RYOYL.js";import{s as le,a as ue}from"../chunks/BVbhH7zi.js";import{g as ce}from"../chunks/CKgHXO-0.js";import{p as ge}from"../chunks/NIXMt2Ke.js";import{W as de}from"../chunks/Dn6bBipe.js";import{e as V,i as q}from"../chunks/CoFdoVSq.js";import{i as te,s as ae}from"../chunks/mtVfkGY5.js";import{p as X}from"../chunks/Bx2u9gNR.js";import{s as Y}from"../chunks/nNctCYpw.js";import{s as N}from"../chunks/C2Md6CUa.js";import{E as fe}from"../chunks/CQHdeKum.js";const Z=20,ve=async({url:w})=>{try{const e=w.searchParams.get("status"),x=w.searchParams.get("batch_id"),S=w.searchParams.get("page"),C=w.searchParams.get("limit"),y=x?parseInt(x):void 0,f=S?parseInt(S):1,_=C?parseInt(C):Z;if(f<1||_<1)throw new Error("Invalid pagination parameters");const c={page:f,rows_per_page:_};let u;return e&&Object.values(B).includes(e)?u=await Q.getWorkflowRunsByStatus(e,y,c):u=await Q.getWorkflowRuns(y,c),{workflowRuns:u,filters:{status:e,batchId:y},pagination:{page:f,limit:_}}}catch(e){return console.error("Failed to load workflows:",e),{workflowRuns:[],filters:{status:null,batchId:void 0},pagination:{page:1,limit:Z},error:e}}},Te=Object.freeze(Object.defineProperty({__proto__:null,load:ve},Symbol.toStringTag,{value:"Module"}));var me=b("<option> </option>"),he=b('<button type="button" class="inline-flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Refresh</button>'),_e=b('<div class="flex items-center justify-between gap-4 rounded-lg bg-white p-4 shadow"><div class="flex items-center gap-4"><label for="status-filter" class="text-sm font-medium text-gray-700">Status:</label> <select id="status-filter" class="rounded-md border-gray-300 py-2 pl-3 pr-10 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"></select></div> <!></div>');function Pe(w,e){J(e,!0);let x=X(e,"currentStatus",3,"all"),S=X(e,"showRefresh",3,!0);const C=[{value:"all",label:"All"},{value:B.PENDING,label:"Pending"},{value:B.RUNNING,label:"Running"},{value:B.COMPLETED,label:"Completed"},{value:B.ERROR,label:"Error"},{value:B.FAILED,label:"Failed"}];function y(g){const d=g.target.value;e.onStatusChange&&e.onStatusChange(d)}function f(){e.onRefresh&&e.onRefresh()}var _=_e(),c=l(_),u=m(l(c),2);u.__change=y,V(u,21,()=>C,q,(g,v)=>{var d=me(),F=l(d,!0);s(d);var O={};U(()=>{D(F,t(v).label),O!==(O=t(v).value)&&(d.value=(d.__value=t(v).value)??"")}),h(g,d)}),s(u);var I;te(u),s(c);var j=m(c,2);{var M=g=>{var v=he();v.__click=f,h(g,v)};H(j,g=>{S()&&e.onRefresh&&g(M)})}s(_),U(()=>{I!==(I=x())&&(u.value=(u.__value=x())??"",ae(u,x()))}),h(w,_),K()}$(["change","click"]);var be=b("<option> </option>"),we=b('<span class="px-3 py-2 text-sm text-gray-700">...</span>'),xe=b('<button type="button"> </button>'),ke=b('<div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between rounded-lg bg-white p-4 shadow"><div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:gap-6"><div class="text-sm text-gray-700">Showing <span class="font-medium"> </span> to <span class="font-medium"> </span> of <span class="font-medium"> </span> results</div> <div class="flex items-center gap-2"><label for="page-size" class="text-sm text-gray-700">Rows per page:</label> <select id="page-size" class="rounded-md border-gray-300 py-1.5 pl-3 pr-8 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"></select></div></div> <nav class="flex items-center gap-1" aria-label="Pagination"><button type="button" aria-label="Previous page"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <!> <button type="button" aria-label="Next page"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></nav></div>');function ye(w,e){J(e,!0);const x=[20,50,100],S=W(()=>(e.currentPage-1)*e.itemsPerPage+1),C=W(()=>Math.min(e.currentPage*e.itemsPerPage,e.totalItems)),y=W(()=>{const a=[];if(e.totalPages<=7)for(let n=1;n<=e.totalPages;n++)a.push(n);else{a.push(1),e.currentPage>3&&a.push("...");const n=Math.max(2,e.currentPage-1),k=Math.min(e.totalPages-1,e.currentPage+1);for(let E=n;E<=k;E++)a.push(E);e.currentPage<e.totalPages-2&&a.push("..."),a.push(e.totalPages)}return a});function f(a){var r;a!==e.currentPage&&a>=1&&a<=e.totalPages&&((r=e.onPageChange)==null||r.call(e,a))}function _(a){var k;const r=a.target,n=parseInt(r.value);(k=e.onPageSizeChange)==null||k.call(e,n)}function c(){e.currentPage>1&&f(e.currentPage-1)}function u(){e.currentPage<e.totalPages&&f(e.currentPage+1)}var I=ke(),j=l(I),M=l(j),g=m(l(M)),v=l(g,!0);s(g);var d=m(g,2),F=l(d,!0);s(d);var O=m(d,2),T=l(O,!0);s(O),ie(),s(M);var o=m(M,2),i=m(l(o),2);i.__change=_,V(i,21,()=>x,q,(a,r)=>{var n=be(),k=l(n,!0);s(n);var E={};U(()=>{D(k,t(r)),E!==(E=t(r))&&(n.value=(n.__value=t(r))??"")}),h(a,n)}),s(i);var P;te(i),s(o),s(j);var z=m(j,2),p=l(z);p.__click=c;var G=m(p,2);V(G,17,()=>t(y),q,(a,r)=>{var n=oe(),k=ee(n);{var E=A=>{var R=we();h(A,R)},re=A=>{var R=xe();R.__click=()=>f(t(r));var ne=l(R,!0);s(R),U(()=>{N(R,1,`min-w-[2.5rem] px-3 py-2 text-sm font-medium rounded-md
            ${t(r)===e.currentPage?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}`),Y(R,"aria-label",`Page ${t(r)??""}`),Y(R,"aria-current",t(r)===e.currentPage?"page":void 0),D(ne,t(r))}),h(A,R)};H(k,A=>{t(r)==="..."?A(E):A(re,!1)})}h(a,n)});var L=m(G,2);L.__click=u,s(z),s(I),U(()=>{D(v,t(S)),D(F,t(C)),D(T,e.totalItems),P!==(P=e.itemsPerPage)&&(i.value=(i.__value=e.itemsPerPage)??"",ae(i,e.itemsPerPage)),p.disabled=e.currentPage===1,N(p,1,`inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-md
        ${e.currentPage===1?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}`),L.disabled=e.currentPage===e.totalPages,N(L,1,`inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-md
        ${e.currentPage===e.totalPages?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}`)}),h(w,I),K()}$(["change","click"]);var Re=b('<div class="mt-6"><!></div>'),Se=b('<div class="mt-6"><!></div>'),Ce=b('<div class="mt-6"><!></div> <div class="mt-6"><!></div> <!>',1),Ie=b('<div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"><!> <!></div>');function Ne(w,e){J(e,!0);const x=()=>ue(ge,"$page",S),[S,C]=le(),y=W(()=>e.data.filters.status||"all"),f=W(()=>e.data.workflowRuns!==null&&typeof e.data.workflowRuns=="object"&&"items"in e.data.workflowRuns),_=W(()=>t(f)?e.data.workflowRuns.items:e.data.workflowRuns),c=W(()=>t(f)?{currentPage:e.data.workflowRuns.page,totalPages:e.data.workflowRuns.total_pages,totalItems:e.data.workflowRuns.total,itemsPerPage:e.data.workflowRuns.rows_per_page}:null);function u(o){const i=new URL(x().url);Object.entries(o).forEach(([P,z])=>{z===null?i.searchParams.delete(P):i.searchParams.set(P,z)}),ce(i.toString())}function I(o){u({status:o==="all"?null:o,page:"1"})}function j(o){u({page:String(o)})}function M(o){u({limit:String(o),page:"1"})}function g(){window.location.reload()}var v=Ie(),d=l(v);se(d,{title:"Workflow Runs",description:"Monitor workflow runs and their status"});var F=m(d,2);{var O=o=>{var i=Re(),P=l(i);fe(P,{get error(){return e.data.error},retry:g}),s(i),h(o,i)},T=o=>{var i=Ce(),P=ee(i),z=l(P);Pe(z,{get currentStatus(){return t(y)},onStatusChange:I,onRefresh:g}),s(P);var p=m(P,2),G=l(p);de(G,{get workflows(){return t(_)}}),s(p);var L=m(p,2);{var a=r=>{var n=Se(),k=l(n);ye(k,{get currentPage(){return t(c).currentPage},get totalPages(){return t(c).totalPages},get totalItems(){return t(c).totalItems},get itemsPerPage(){return t(c).itemsPerPage},onPageChange:j,onPageSizeChange:M}),s(n),h(r,n)};H(L,r=>{t(f)&&t(c)&&r(a)})}h(o,i)};H(F,o=>{e.data.error?o(O):o(T,!1)})}s(v),h(w,v),K(),C()}export{Ne as component,Te as universal};

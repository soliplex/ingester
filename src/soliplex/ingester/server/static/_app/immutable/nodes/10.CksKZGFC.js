import{a as Q,P as se}from"../chunks/hTc4Iqh7.js";import{R as A}from"../chunks/BOsosYgm.js";import{v as $,p as J,B as X,c as w,k as i,l as m,C as V,r as s,e as U,m as F,g as t,h as _,D as q,M as ee,x as H,N as te,j as K,n as oe,y as le,d as ae,z as T,q as Y,u as B,E as ie,G as ue}from"../chunks/DCSobnyE.js";import{g as ce,p as ge}from"../chunks/rpC5PbGf.js";import{W as de}from"../chunks/SwHyXTjJ.js";import{E as ve}from"../chunks/DQ-Inkti.js";const Z=20,fe=async({url:x})=>{try{const e=x.searchParams.get("status"),k=x.searchParams.get("batch_id"),C=x.searchParams.get("page"),I=x.searchParams.get("limit"),R=k?parseInt(k):void 0,v=C?parseInt(C):1,P=I?parseInt(I):Z;if(v<1||P<1)throw new Error("Invalid pagination parameters");const c={page:v,rows_per_page:P},u=!0;let h;return e&&Object.values(A).includes(e)?h=await Q.getWorkflowRunsByStatus(e,R,c,u):h=await Q.getWorkflowRuns(R,c,u),{workflowRuns:h,filters:{status:e,batchId:R},pagination:{page:v,limit:P}}}catch(e){return console.error("Failed to load workflows:",e),{workflowRuns:[],filters:{status:null,batchId:void 0},pagination:{page:1,limit:Z},error:e}}},Be=Object.freeze(Object.defineProperty({__proto__:null,load:fe},Symbol.toStringTag,{value:"Module"}));var me=w("<option> </option>"),he=w('<button type="button" class="inline-flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Refresh</button>'),_e=w('<div class="flex items-center justify-between gap-4 rounded-lg bg-white p-4 shadow"><div class="flex items-center gap-4"><label for="status-filter" class="text-sm font-medium text-gray-700">Status:</label> <select id="status-filter" class="rounded-md border-gray-300 py-2 pl-3 pr-10 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"></select></div> <!></div>');function Pe(x,e){J(e,!0);let k=X(e,"currentStatus",3,"all"),C=X(e,"showRefresh",3,!0);const I=[{value:"all",label:"All"},{value:A.PENDING,label:"Pending"},{value:A.RUNNING,label:"Running"},{value:A.COMPLETED,label:"Completed"},{value:A.ERROR,label:"Error"},{value:A.FAILED,label:"Failed"}];function R(g){const d=g.target.value;e.onStatusChange&&e.onStatusChange(d)}function v(){e.onRefresh&&e.onRefresh()}var P=_e(),c=i(P),u=m(i(c),2);u.__change=R,V(u,21,()=>I,q,(g,f)=>{var d=me(),L=i(d,!0);s(d);var z={};U(()=>{F(L,t(f).label),z!==(z=t(f).value)&&(d.value=(d.__value=t(f).value)??"")}),_(g,d)}),s(u);var h;ee(u),s(c);var M=m(c,2);{var O=g=>{var f=he();f.__click=v,_(g,f)};H(M,g=>{C()&&e.onRefresh&&g(O)})}s(P),U(()=>{h!==(h=k())&&(u.value=(u.__value=k())??"",te(u,k()))}),_(x,P),K()}$(["change","click"]);var be=w("<option> </option>"),we=w('<span class="px-3 py-2 text-sm text-gray-700">...</span>'),xe=w('<button type="button"> </button>'),ke=w('<div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between rounded-lg bg-white p-4 shadow"><div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:gap-6"><div class="text-sm text-gray-700">Showing <span class="font-medium"> </span> to <span class="font-medium"> </span> of <span class="font-medium"> </span> results</div> <div class="flex items-center gap-2"><label for="page-size" class="text-sm text-gray-700">Rows per page:</label> <select id="page-size" class="rounded-md border-gray-300 py-1.5 pl-3 pr-8 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"></select></div></div> <nav class="flex items-center gap-1" aria-label="Pagination"><button type="button" aria-label="Previous page"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <!> <button type="button" aria-label="Next page"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></nav></div>');function ye(x,e){J(e,!0);const k=[20,50,100],C=B(()=>(e.currentPage-1)*e.itemsPerPage+1),I=B(()=>Math.min(e.currentPage*e.itemsPerPage,e.totalItems)),R=B(()=>{const a=[];if(e.totalPages<=7)for(let r=1;r<=e.totalPages;r++)a.push(r);else{a.push(1),e.currentPage>3&&a.push("...");const r=Math.max(2,e.currentPage-1),y=Math.min(e.totalPages-1,e.currentPage+1);for(let j=r;j<=y;j++)a.push(j);e.currentPage<e.totalPages-2&&a.push("..."),a.push(e.totalPages)}return a});function v(a){var n;a!==e.currentPage&&a>=1&&a<=e.totalPages&&((n=e.onPageChange)==null||n.call(e,a))}function P(a){var y;const n=a.target,r=parseInt(n.value);(y=e.onPageSizeChange)==null||y.call(e,r)}function c(){e.currentPage>1&&v(e.currentPage-1)}function u(){e.currentPage<e.totalPages&&v(e.currentPage+1)}var h=ke(),M=i(h),O=i(M),g=m(i(O)),f=i(g,!0);s(g);var d=m(g,2),L=i(d,!0);s(d);var z=m(d,2),N=i(z,!0);s(z),oe(),s(O);var o=m(O,2),l=m(i(o),2);l.__change=P,V(l,21,()=>k,q,(a,n)=>{var r=be(),y=i(r,!0);s(r);var j={};U(()=>{F(y,t(n)),j!==(j=t(n))&&(r.value=(r.__value=t(n))??"")}),_(a,r)}),s(l);var b;ee(l),s(o),s(M);var D=m(M,2),E=i(D);E.__click=c;var p=m(E,2);V(p,17,()=>t(R),q,(a,n)=>{var r=le(),y=ae(r);{var j=W=>{var S=we();_(W,S)},ne=W=>{var S=xe();S.__click=()=>v(t(n));var re=i(S,!0);s(S),U(()=>{T(S,1,`min-w-[2.5rem] px-3 py-2 text-sm font-medium rounded-md
            ${t(n)===e.currentPage?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}`),Y(S,"aria-label",`Page ${t(n)??""}`),Y(S,"aria-current",t(n)===e.currentPage?"page":void 0),F(re,t(n))}),_(W,S)};H(y,W=>{t(n)==="..."?W(j):W(ne,!1)})}_(a,r)});var G=m(p,2);G.__click=u,s(D),s(h),U(()=>{F(f,t(C)),F(L,t(I)),F(N,e.totalItems),b!==(b=e.itemsPerPage)&&(l.value=(l.__value=e.itemsPerPage)??"",te(l,e.itemsPerPage)),E.disabled=e.currentPage===1,T(E,1,`inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-md
        ${e.currentPage===1?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}`),G.disabled=e.currentPage===e.totalPages,T(G,1,`inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-md
        ${e.currentPage===e.totalPages?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}`)}),_(x,h),K()}$(["change","click"]);var Re=w('<div class="mt-6"><!></div>'),Se=w('<div class="mt-6"><!></div>'),Ce=w('<div class="mt-6"><!></div> <div class="mt-6"><!></div> <!>',1),Ie=w('<div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"><!> <!></div>');function We(x,e){J(e,!0);const k=()=>ue(ge,"$page",C),[C,I]=ie(),R=B(()=>e.data.filters.status||"all"),v=B(()=>e.data.workflowRuns!==null&&typeof e.data.workflowRuns=="object"&&"items"in e.data.workflowRuns),P=B(()=>t(v)?e.data.workflowRuns.items:e.data.workflowRuns),c=B(()=>t(v)?{currentPage:e.data.workflowRuns.page,totalPages:e.data.workflowRuns.total_pages,totalItems:e.data.workflowRuns.total,itemsPerPage:e.data.workflowRuns.rows_per_page}:null);function u(o){const l=new URL(k().url);Object.entries(o).forEach(([b,D])=>{D===null?l.searchParams.delete(b):l.searchParams.set(b,D)}),ce(l.toString())}function h(o){u({status:o==="all"?null:o,page:"1"})}function M(o){u({page:String(o)})}function O(o){u({limit:String(o),page:"1"})}function g(){window.location.reload()}var f=Ie(),d=i(f);se(d,{title:"Workflow Runs",description:"Monitor workflow runs and their status"});var L=m(d,2);{var z=o=>{var l=Re(),b=i(l);ve(b,{get error(){return e.data.error},retry:g}),s(l),_(o,l)},N=o=>{var l=Ce(),b=ae(l),D=i(b);Pe(D,{get currentStatus(){return t(R)},onStatusChange:h,onRefresh:g}),s(b);var E=m(b,2),p=i(E);de(p,{get workflows(){return t(P)}}),s(E);var G=m(E,2);{var a=n=>{var r=Se(),y=i(r);ye(y,{get currentPage(){return t(c).currentPage},get totalPages(){return t(c).totalPages},get totalItems(){return t(c).totalItems},get itemsPerPage(){return t(c).itemsPerPage},onPageChange:M,onPageSizeChange:O}),s(r),_(n,r)};H(G,n=>{t(v)&&t(c)&&n(a)})}_(o,l)};H(L,o=>{e.data.error?o(z):o(N,!1)})}s(f),_(x,f),K(),I()}export{We as component,Be as universal};

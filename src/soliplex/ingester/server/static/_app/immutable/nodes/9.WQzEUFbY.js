import{a as P,P as tt}from"../chunks/hTc4Iqh7.js";import{R as w}from"../chunks/BOsosYgm.js";import{v as at,p as U,c as g,k as s,C as T,r,e as G,m as b,g as _,h as f,D as I,l as d,z as et,A as rt,j as V,x as B,d as st,u as ot}from"../chunks/DCSobnyE.js";import{S}from"../chunks/ritJiAL8.js";import{E as lt}from"../chunks/DQ-Inkti.js";import{a as H,c as dt}from"../chunks/B5MikgXH.js";import{g as it}from"../chunks/CKbI6y60.js";const nt=async()=>{try{const[u,e]=await Promise.all([P.getRunGroups(),P.getWorkflowRuns()]),y=u.slice(0,10),m=(await Promise.all(y.map(async a=>{try{const c=await P.getRunGroupStats(a.id);return{runGroup:a,stats:c}}catch{return null}}))).filter(a=>a!==null),i=e.length,n=e.filter(a=>a.status===w.COMPLETED).length,p=e.filter(a=>a.status===w.FAILED||a.status===w.ERROR).length,x=e.filter(a=>a.status===w.RUNNING).length,l=i>0?Math.round(n/i*100):0,t=e.filter(a=>a.status===w.COMPLETED&&a.duration!==null),o=t.length>0?t.reduce((a,c)=>a+(c.duration||0),0)/t.length:0;return{systemStats:{totalWorkflows:i,completedWorkflows:n,failedWorkflows:p,activeWorkflows:x,successRate:l,avgDuration:o},runGroupStats:m}}catch(u){return console.error("Failed to load statistics:",u),{systemStats:{totalWorkflows:0,completedWorkflows:0,failedWorkflows:0,activeWorkflows:0,successRate:0,avgDuration:0},runGroupStats:[],error:u}}},Gt=Object.freeze(Object.defineProperty({__proto__:null,load:nt},Symbol.toStringTag,{value:"Module"}));var ct=g('<th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"> </th>'),ut=g('<td class="whitespace-nowrap px-6 py-4 text-sm text-gray-900"> </td>'),vt=g("<tr></tr>"),ft=g('<div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr></tr></thead><tbody class="divide-y divide-gray-200 bg-white"></tbody></table></div>');function gt(u,e){U(e,!0);function y(l){e.onRowClick&&e.onRowClick(l)}function k(l,t){return t.format?t.format(l):l==null?"â€”":String(l)}var m=ft(),i=s(m),n=s(i),p=s(n);T(p,21,()=>e.columns,I,(l,t)=>{var o=ct(),a=s(o,!0);r(o),G(()=>b(a,_(t).label)),f(l,o)}),r(p),r(n);var x=d(n);T(x,21,()=>e.data,I,(l,t)=>{var o=vt();o.__click=()=>y(_(t)),T(o,21,()=>e.columns,I,(a,c)=>{var h=ut(),R=s(h,!0);r(h),G(D=>b(R,D),[()=>k(_(t)[_(c).key],_(c))]),f(a,h)}),r(o),G(()=>et(o,1,rt(e.onRowClick?"cursor-pointer hover:bg-gray-50":""))),f(l,o)}),r(x),r(i),r(m),f(u,m),V()}at(["click"]);var mt=g('<div class="mt-6"><!></div>'),_t=g('<div class="px-6 py-12 text-center text-gray-500"><p>No run group data available</p></div>'),yt=g('<div class="mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4"><!> <!> <!> <!></div> <div class="mt-8"><div class="overflow-hidden rounded-lg bg-white shadow"><div class="px-6 py-5"><h3 class="text-lg font-semibold text-gray-900">Performance Metrics</h3> <div class="mt-4 grid grid-cols-1 gap-6 sm:grid-cols-3"><div><dt class="text-sm font-medium text-gray-500">Average Duration</dt> <dd class="mt-1 text-2xl font-semibold text-gray-900"> </dd></div> <div><dt class="text-sm font-medium text-gray-500">Active Workflows</dt> <dd class="mt-1 text-2xl font-semibold text-gray-900"> </dd></div> <div><dt class="text-sm font-medium text-gray-500">Total Run Groups</dt> <dd class="mt-1 text-2xl font-semibold text-gray-900"> </dd></div></div></div></div></div> <div class="mt-8"><div class="overflow-hidden rounded-lg bg-white shadow"><div class="border-b border-gray-200 px-6 py-4"><h3 class="text-lg font-semibold text-gray-900">Recent Run Groups</h3></div> <!></div></div>',1),pt=g('<div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"><!> <!></div>');function Dt(u,e){U(e,!0);const y=ot(()=>e.data.runGroupStats.map(t=>({runGroupId:t.runGroup.id,batchId:t.runGroup.batch_id,workflow:t.runGroup.workflow_definition_id,created:dt(t.runGroup.created_date),totalRuns:t.stats.total_runs,completed:t.stats.status_counts.COMPLETED||0,failed:(t.stats.status_counts.FAILED||0)+(t.stats.status_counts.ERROR||0),avgDuration:H(t.stats.avg_duration)}))),k=[{key:"runGroupId",label:"Run Group"},{key:"batchId",label:"Batch"},{key:"workflow",label:"Workflow"},{key:"created",label:"Created"},{key:"totalRuns",label:"Total Runs"},{key:"completed",label:"Completed"},{key:"failed",label:"Failed"},{key:"avgDuration",label:"Avg Duration"}];function m(t){it(`/batches/${t.batchId}`)}var i=pt(),n=s(i);tt(n,{title:"Statistics",description:"System-wide workflow and processing metrics"});var p=d(n,2);{var x=t=>{var o=mt(),a=s(o);lt(a,{get error(){return e.data.error}}),r(o),f(t,o)},l=t=>{var o=yt(),a=st(o),c=s(a);S(c,{title:"Total Workflows",get value(){return e.data.systemStats.totalWorkflows},icon:"âš™ï¸"});var h=d(c,2);S(h,{title:"Completed",get value(){return e.data.systemStats.completedWorkflows},description:"Successfully finished",icon:"âœ“"});var R=d(h,2);S(R,{title:"Failed",get value(){return e.data.systemStats.failedWorkflows},description:"Requires attention",icon:"âœ—"});var D=d(R,2);S(D,{title:"Success Rate",get value(){return`${e.data.systemStats.successRate??""}%`},icon:"ðŸ“Š"}),r(a);var W=d(a,2),M=s(W),O=s(M),A=d(s(O),2),C=s(A),F=d(s(C),2),J=s(F,!0);r(F),r(C);var E=d(C,2),L=d(s(E),2),K=s(L,!0);r(L),r(E);var N=d(E,2),j=d(s(N),2),Q=s(j,!0);r(j),r(N),r(A),r(O),r(M),r(W);var z=d(W,2),q=s(z),X=d(s(q),2);{var Y=v=>{var $=_t();f(v,$)},Z=v=>{gt(v,{get columns(){return k},get data(){return _(y)},onRowClick:m})};B(X,v=>{_(y).length===0?v(Y):v(Z,!1)})}r(q),r(z),G(v=>{b(J,v),b(K,e.data.systemStats.activeWorkflows),b(Q,e.data.runGroupStats.length)},[()=>H(e.data.systemStats.avgDuration)]),f(t,o)};B(p,t=>{e.data.error?t(x):t(l,!1)})}r(i),f(u,i),V()}export{Dt as component,Gt as universal};

var S=Object.defineProperty;var E=(o,t,e)=>t in o?S(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var p=(o,t,e)=>E(o,typeof t!="symbol"?t+"":t,e);import{f as d,a as w,s as m}from"./B3CJz9bp.js";import{t as g,c as u,r as f,s as y}from"./BrMMe1xa.js";import{s as P}from"./jZW0bbhV.js";import{i as _}from"./CWeRAD6a.js";const D="/api/v1",U=3e4;class b extends Error{constructor(t,e,s){super(t),this.statusCode=e,this.endpoint=s,this.name="ApiError"}}class v extends Error{constructor(t,e){super(t),this.endpoint=e,this.name="NetworkError"}}function W(o,t){throw o instanceof Response?new b(`HTTP ${o.status}: ${o.statusText}`,o.status,t):o instanceof TypeError&&o.message.includes("fetch")?new v("Network error: Unable to connect to API",t):o instanceof Error?o:new Error("Unknown error occurred")}function G(o){return o instanceof b?`API Error (${o.statusCode}): ${o.message}`:o instanceof v?`Network Error: ${o.message}`:o instanceof Error?o.message:"An unknown error occurred"}class ${constructor(t=D,e=U){p(this,"baseUrl");p(this,"timeout");this.baseUrl=t,this.timeout=e}async fetchWithTimeout(t,e){const s=new AbortController,n=setTimeout(()=>s.abort(),this.timeout);try{const r=await fetch(t,{...e,signal:s.signal});if(clearTimeout(n),!r.ok){const c=await r.json().catch(()=>({}));throw new Error(c.error||r.statusText)}return r}catch(r){clearTimeout(n),W(r,t)}}async get(t,e){let s=`${this.baseUrl}${t}`;if(e){const r=new URLSearchParams;Object.entries(e).forEach(([c,l])=>{r.append(c,String(l))}),s+=`?${r.toString()}`}return(await this.fetchWithTimeout(s)).json()}async post(t,e){const s=e instanceof FormData;return(await this.fetchWithTimeout(`${this.baseUrl}${t}`,{method:"POST",headers:s?{}:{"Content-Type":"application/json"},body:s?e:JSON.stringify(e)})).json()}async getBatches(){return this.get("/batch/")}async getBatchStatus(t){return this.get("/batch/status",{batch_id:t})}async getDocuments(t,e){const s={};return t&&(s.batch_id=t),e&&(s.source=e),this.get("/document/",s)}async getWorkflowRuns(t,e,s){const n={};return t&&(n.batch_id=t),e&&(n.page=e.page,n.rows_per_page=e.rows_per_page),s&&(n.include_doc_info=!0),this.get("/workflow/",n)}async getWorkflowRunsByStatus(t,e,s,n){const r={status:t};return e&&(r.batch_id=e),s&&(r.page=s.page,r.rows_per_page=s.rows_per_page),n&&(r.include_doc_info=!0),this.get("/workflow/by-status",r)}async getWorkflowRunDetails(t){return this.get(`/workflow/runs/${t}`)}async getWorkflowSteps(t){return this.get("/workflow/steps",{status:t})}async getWorkflowLifecycleHistory(t){return this.get(`/workflow/runs/${t}/lifecycle`)}async getWorkflowDefinitions(){return this.get("/workflow/definitions")}async getWorkflowDefinition(t){return this.get(`/workflow/definitions/${t}`)}async getParamSets(){return this.get("/workflow/param-sets")}async getParamSet(t){return this.get(`/workflow/param-sets/${t}`)}async getParamSetsByTarget(t){return this.get(`/workflow/param-sets/target/${t}`)}async uploadParamSet(t){const e=new URLSearchParams;return e.append("yaml_content",t),(await this.fetchWithTimeout(`${this.baseUrl}/workflow/param-sets`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e.toString()})).json()}async deleteParamSet(t){return(await this.fetchWithTimeout(`${this.baseUrl}/workflow/param-sets/${t}`,{method:"DELETE"})).json()}async getRunGroups(t){const e=t?{batch_id:t}:void 0;return this.get("/workflow/run-groups",e)}async getRunGroup(t){return this.get(`/workflow/run-groups/${t}`)}async getRunGroupStats(t){return this.get(`/workflow/run-groups/${t}/stats`)}async startWorkflows(t,e,s,n){const r=new URLSearchParams;return r.append("batch_id",String(t)),e&&r.append("workflow_definition_id",e),s!==void 0&&r.append("priority",String(s)),n&&r.append("param_id",n),(await this.fetchWithTimeout(`${this.baseUrl}/batch/start-workflows`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()})).json()}async getLanceDBList(){return this.get("/lancedb/list")}async getLanceDBInfo(t){return this.get("/lancedb/info",{db:t})}async getLanceDBDocuments(t,e,s,n){const r={db:t};return e!==void 0&&(r.limit=e),s!==void 0&&(r.offset=s),n&&(r.filter=n),this.get("/lancedb/documents",r)}async vacuumLanceDB(t){return this.get("/lancedb/vacuum",{db:t})}}const H=new $;var A=d('<p class="mt-1 text-sm text-gray-500"> </p>'),L=d('<div class="ml-4 mt-2 flex-shrink-0"><!></div>'),R=d('<div class="border-b border-gray-200 bg-white px-4 py-5 sm:px-6 lg:px-8"><div class="-ml-4 -mt-2 flex flex-wrap items-center justify-between sm:flex-nowrap"><div class="ml-4 mt-2"><h1 class="text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl"> </h1> <!></div> <!></div></div>');function F(o,t){var e=R(),s=u(e),n=u(s),r=u(n),c=u(r,!0);f(r);var l=y(r,2);{var k=a=>{var i=A(),h=u(i,!0);f(i),g(()=>m(h,t.description)),w(a,i)};_(l,a=>{t.description&&a(k)})}f(n);var x=y(n,2);{var T=a=>{var i=L(),h=u(i);P(h,()=>t.actions),f(i),w(a,i)};_(x,a=>{t.actions&&a(T)})}f(s),f(e),g(()=>m(c,t.title)),w(o,e)}export{F as P,H as a,G as g};

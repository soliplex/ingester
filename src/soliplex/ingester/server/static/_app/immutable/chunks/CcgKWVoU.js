var E=Object.defineProperty;var S=(s,t,e)=>t in s?E(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var w=(s,t,e)=>S(s,typeof t!="symbol"?t+"":t,e);import{f as m,a as p,s as g}from"./j3K8jUZk.js";import{t as d,c as u,r as f,s as y}from"./Dj7rAsuq.js";import{s as P}from"./BMIiHox4.js";import{i as v}from"./C64RYOYL.js";const A="http://127.0.0.1:8000/api/v1",U=3e4;class k extends Error{constructor(t,e,r){super(t),this.statusCode=e,this.endpoint=r,this.name="ApiError"}}class b extends Error{constructor(t,e){super(t),this.endpoint=e,this.name="NetworkError"}}function W(s,t){throw s instanceof Response?new k(`HTTP ${s.status}: ${s.statusText}`,s.status,t):s instanceof TypeError&&s.message.includes("fetch")?new b("Network error: Unable to connect to API",t):s instanceof Error?s:new Error("Unknown error occurred")}function L(s){return s instanceof k?`API Error (${s.statusCode}): ${s.message}`:s instanceof b?`Network Error: ${s.message}`:s instanceof Error?s.message:"An unknown error occurred"}class R{constructor(t=A,e=U){w(this,"baseUrl");w(this,"timeout");this.baseUrl=t,this.timeout=e}async fetchWithTimeout(t,e){const r=new AbortController,n=setTimeout(()=>r.abort(),this.timeout);try{const o=await fetch(t,{...e,signal:r.signal});if(clearTimeout(n),!o.ok){const c=await o.json().catch(()=>({}));throw new Error(c.error||o.statusText)}return o}catch(o){clearTimeout(n),W(o,t)}}async get(t,e){let r=`${this.baseUrl}${t}`;if(e){const o=new URLSearchParams;Object.entries(e).forEach(([c,h])=>{o.append(c,String(h))}),r+=`?${o.toString()}`}return(await this.fetchWithTimeout(r)).json()}async post(t,e){const r=e instanceof FormData;return(await this.fetchWithTimeout(`${this.baseUrl}${t}`,{method:"POST",headers:r?{}:{"Content-Type":"application/json"},body:r?e:JSON.stringify(e)})).json()}async getBatches(){return this.get("/batch/")}async getBatchStatus(t){return this.get("/batch/status",{batch_id:t})}async getDocuments(t,e){const r={};return t&&(r.batch_id=t),e&&(r.source=e),this.get("/document/",r)}async getWorkflowRuns(t){const e=t?{batch_id:t}:void 0;return this.get("/workflow/",e)}async getWorkflowRunsByStatus(t,e){const r={status:t};return e&&(r.batch_id=e),this.get("/workflow/by-status",r)}async getWorkflowRunDetails(t){return this.get(`/workflow/runs/${t}`)}async getWorkflowSteps(t){return this.get("/workflow/steps",{status:t})}async getWorkflowDefinitions(){return this.get("/workflow/definitions")}async getWorkflowDefinition(t){return this.get(`/workflow/definitions/${t}`)}async getParamSets(){return this.get("/workflow/param-sets")}async getParamSet(t){return this.get(`/workflow/param-sets/${t}`)}async getParamSetsByTarget(t){return this.get(`/workflow/param-sets/target/${t}`)}async getRunGroups(t){const e=t?{batch_id:t}:void 0;return this.get("/workflow/run-groups",e)}async getRunGroup(t){return this.get(`/workflow/run-groups/${t}`)}async getRunGroupStats(t){return this.get(`/workflow/run-groups/${t}/stats`)}async startWorkflows(t,e,r,n){const o=new URLSearchParams;return o.append("batch_id",String(t)),e&&o.append("workflow_definition_id",e),r!==void 0&&o.append("priority",String(r)),n&&o.append("param_id",n),(await this.fetchWithTimeout(`${this.baseUrl}/batch/start-workflows`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()})).json()}}const F=new R;var $=m('<p class="mt-1 text-sm text-gray-500"> </p>'),j=m('<div class="ml-4 mt-2 flex-shrink-0"><!></div>'),C=m('<div class="border-b border-gray-200 bg-white px-4 py-5 sm:px-6 lg:px-8"><div class="-ml-4 -mt-2 flex flex-wrap items-center justify-between sm:flex-nowrap"><div class="ml-4 mt-2"><h1 class="text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl"> </h1> <!></div> <!></div></div>');function H(s,t){var e=C(),r=u(e),n=u(r),o=u(n),c=u(o,!0);f(o);var h=y(o,2);{var _=a=>{var i=$(),l=u(i,!0);f(i),d(()=>g(l,t.description)),p(a,i)};v(h,a=>{t.description&&a(_)})}f(n);var x=y(n,2);{var T=a=>{var i=j(),l=u(i);P(l,()=>t.actions),f(i),p(a,i)};v(x,a=>{t.actions&&a(T)})}f(r),f(e),d(()=>g(c,t.title)),p(s,e)}export{H as P,F as a,L as g};

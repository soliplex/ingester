import{a as N,P as W}from"../chunks/CiG-dbCb.js";import{d as X,f as p,s as D,a as l,c as H,b as Y,t as Z}from"../chunks/B3CJz9bp.js";import{p as O,c as r,r as e,s as b,n as F,g as _,b as S,t as T,a as A,d as f,f as j}from"../chunks/BrMMe1xa.js";import{i as y}from"../chunks/CWeRAD6a.js";import{e as $}from"../chunks/jBV541Un.js";import{s as aa}from"../chunks/WXE6NR2k.js";import{t as ea}from"../chunks/Or1p4CJ_.js";import{E as ta}from"../chunks/BEaJ_kA6.js";import{E as ra}from"../chunks/_GzF0giG.js";const sa=async()=>{try{return{response:await N.getLanceDBList()}}catch(v){return console.error("Failed to load LanceDB databases:",v),{response:null,error:v}}},La=Object.freeze(Object.defineProperty({__proto__:null,load:sa},Symbol.toStringTag,{value:"Module"}));var oa=p('<span class="text-sm text-red-600"> </span>'),ia=p('<span class="text-sm text-green-600">Vacuum completed</span>'),na=Y('<svg class="mr-1.5 h-4 w-4 animate-spin" viewBox="0 0 24 24" fill="none"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Vacuuming...',1),la=p('<div class="rounded-lg border border-gray-200 bg-white p-5 transition hover:border-blue-300 hover:shadow-md"><a class="block focus:outline-none focus:ring-2 focus:ring-blue-500"><div class="flex items-start justify-between"><div class="flex-1"><div class="flex items-center gap-2"><h3 class="text-lg font-semibold text-gray-900"> </h3> <span class="inline-flex items-center rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800"> </span></div> <p class="mt-2 text-sm text-gray-600"> </p></div> <div class="ml-4 text-right"><span class="text-2xl" aria-hidden="true">üóÑÔ∏è</span></div></div></a> <div class="mt-4 flex items-center justify-between border-t border-gray-100 pt-4"><div class="flex-1"><!></div> <button type="button" class="inline-flex items-center rounded-md bg-gray-100 px-3 py-1.5 text-sm font-medium text-gray-700 transition hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed disabled:opacity-50"><!></button></div></div>');function da(v,t){O(t,!0);let d=S(!1),c=S(null),u=S(!1);async function h(a){a.preventDefault(),a.stopPropagation(),f(d,!0),f(c,null),f(u,!1);try{const s=await N.vacuumLanceDB(t.database.name);s.status==="ok"?(f(u,!0),setTimeout(()=>f(u,!1),3e3)):f(c,s.error??"Vacuum failed",!0)}catch(s){f(c,s instanceof Error?s.message:"Vacuum failed",!0)}finally{f(d,!1)}}var n=la(),o=r(n),i=r(o),m=r(i),w=r(m),g=r(w),L=r(g,!0);e(g);var x=b(g,2),V=r(x,!0);e(x),e(w);var B=b(w,2),k=r(B,!0);e(B),e(m),F(2),e(i),e(o);var E=b(o,2),z=r(E),q=r(z);{var G=a=>{var s=oa(),M=r(s,!0);e(s),T(()=>D(M,_(c))),l(a,s)},I=a=>{var s=H(),M=j(s);{var R=P=>{var U=ia();l(P,U)};y(M,P=>{_(u)&&P(R)},!0)}l(a,s)};y(q,a=>{_(c)?a(G):a(I,!1)})}e(z);var C=b(z,2);C.__click=h;var J=r(C);{var K=a=>{var s=na();F(),l(a,s)},Q=a=>{var s=Z("Vacuum");l(a,s)};y(J,a=>{_(d)?a(K):a(Q,!1)})}e(C),e(E),e(n),T(a=>{aa(o,"href",`/lancedb/${t.database.name??""}`),D(L,t.database.name),D(V,t.database.size_human),D(k,a),C.disabled=_(d)},[()=>ea(t.database.path,60)]),l(v,n),A()}X(["click"]);var ca=p('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"></div>');function va(v,t){O(t,!0);var d=H(),c=j(d);{var u=n=>{ta(n,{title:"No vector databases found",description:"There are no LanceDB databases in the configured directory."})},h=n=>{var o=ca();$(o,21,()=>t.databases,i=>i.name,(i,m)=>{da(i,{get database(){return _(m)}})}),e(o),l(n,o)};y(c,n=>{t.databases.length===0?n(u):n(h,!1)})}l(v,d),A()}var ua=p('<div class="mt-6"><!></div>'),ma=p('<div class="mt-4 text-sm text-gray-500">Directory: <code class="rounded bg-gray-100 px-2 py-1"> </code></div> <div class="mt-6"><!></div>',1),fa=p('<div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"><!> <!></div>');function Va(v,t){O(t,!0);var d=fa(),c=r(d);W(c,{title:"Vector Databases",description:"Manage LanceDB vector database instances"});var u=b(c,2);{var h=o=>{var i=ua(),m=r(i);ra(m,{get error(){return t.data.error}}),e(i),l(o,i)},n=o=>{var i=H(),m=j(i);{var w=g=>{var L=ma(),x=j(L),V=b(r(x)),B=r(V,!0);e(V),e(x);var k=b(x,2),E=r(k);va(E,{get databases(){return t.data.response.databases}}),e(k),T(()=>D(B,t.data.response.lancedb_dir)),l(g,L)};y(m,g=>{t.data.response&&g(w)},!0)}l(o,i)};y(u,o=>{t.data.error?o(h):o(n,!1)})}e(d),l(v,d),A()}export{Va as component,La as universal};

import{a as y,P as M}from"../chunks/CcgKWVoU.js";import{R as v}from"../chunks/DhxlaAyh.js";import{d as N,f as g,s as W,a as m}from"../chunks/j3K8jUZk.js";import{p as E,c,s as b,r as l,t as P,g as p,a as I,f as F,u as L}from"../chunks/Dj7rAsuq.js";import{i as O}from"../chunks/C64RYOYL.js";import{s as A,a as B}from"../chunks/BVbhH7zi.js";import{g as D}from"../chunks/Ehz4q3b4.js";import{p as H}from"../chunks/D2WC8zGO.js";import{W as G}from"../chunks/OEI59-WQ.js";import{e as T,i as U}from"../chunks/CoFdoVSq.js";import{i as z,s as q}from"../chunks/mtVfkGY5.js";import{p as C}from"../chunks/Bx2u9gNR.js";import{E as J}from"../chunks/KofPBhdr.js";const K=async({url:d})=>{try{const e=d.searchParams.get("status"),o=d.searchParams.get("batch_id"),n=o?parseInt(o):void 0;let i;return e&&Object.values(v).includes(e)?i=await y.getWorkflowRunsByStatus(e,n):i=await y.getWorkflowRuns(n),{workflows:i,filters:{status:e,batchId:n}}}catch(e){return console.error("Failed to load workflows:",e),{workflows:[],filters:{status:null,batchId:void 0},error:e}}},me=Object.freeze(Object.defineProperty({__proto__:null,load:K},Symbol.toStringTag,{value:"Module"}));var Q=g("<option> </option>"),V=g('<button type="button" class="inline-flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Refresh</button>'),X=g('<div class="flex items-center justify-between gap-4 rounded-lg bg-white p-4 shadow"><div class="flex items-center gap-4"><label for="status-filter" class="text-sm font-medium text-gray-700">Status:</label> <select id="status-filter" class="rounded-md border-gray-300 py-2 pl-3 pr-10 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"></select></div> <!></div>');function Y(d,e){E(e,!0);let o=C(e,"currentStatus",3,"all"),n=C(e,"showRefresh",3,!0);const i=[{value:"all",label:"All"},{value:v.PENDING,label:"Pending"},{value:v.RUNNING,label:"Running"},{value:v.COMPLETED,label:"Completed"},{value:v.ERROR,label:"Error"},{value:v.FAILED,label:"Failed"}];function w(a){const r=a.target.value;e.onStatusChange&&e.onStatusChange(r)}function x(){e.onRefresh&&e.onRefresh()}var f=X(),u=c(f),s=b(c(u),2);s.__change=w,T(s,21,()=>i,U,(a,t)=>{var r=Q(),S=c(r,!0);l(r);var h={};P(()=>{W(S,p(t).label),h!==(h=p(t).value)&&(r.value=(r.__value=p(t).value)??"")}),m(a,r)}),l(s);var _;z(s),l(u);var R=b(u,2);{var k=a=>{var t=V();t.__click=x,m(a,t)};O(R,a=>{n()&&e.onRefresh&&a(k)})}l(f),P(()=>{_!==(_=o())&&(s.value=(s.__value=o())??"",q(s,o()))}),m(d,f),I()}N(["change","click"]);var Z=g('<div class="mt-6"><!></div>'),$=g('<div class="mt-6"><!></div> <div class="mt-6"><!></div>',1),ee=g('<div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"><!> <!></div>');function ge(d,e){E(e,!0);const o=()=>B(H,"$page",n),[n,i]=A(),w=L(()=>e.data.filters.status||"all");function x(a){const t=new URL(o().url);a==="all"?t.searchParams.delete("status"):t.searchParams.set("status",a),D(t.toString())}function f(){window.location.reload()}var u=ee(),s=c(u);M(s,{title:"Workflows",description:"Monitor workflow runs and their status"});var _=b(s,2);{var R=a=>{var t=Z(),r=c(t);J(r,{get error(){return e.data.error},retry:f}),l(t),m(a,t)},k=a=>{var t=$(),r=F(t),S=c(r);Y(S,{get currentStatus(){return p(w)},onStatusChange:x,onRefresh:f}),l(r);var h=b(r,2),j=c(h);G(j,{get workflows(){return e.data.workflows}}),l(h),m(a,t)};O(_,a=>{e.data.error?a(R):a(k,!1)})}l(u),m(d,u),I(),i()}export{ge as component,me as universal};

import{a as Q,P as se}from"../chunks/Bf58JmFK.js";import{R as A}from"../chunks/BOsosYgm.js";import{d as $,f as w,s as B,a as _,c as oe}from"../chunks/B3CJz9bp.js";import{p as J,c as l,s as m,r as s,t as U,g as t,a as K,n as ie,f as ee,u as D}from"../chunks/BrMMe1xa.js";import{i as H}from"../chunks/CWeRAD6a.js";import{s as le,a as ue}from"../chunks/Dv48UF54.js";import{g as ce}from"../chunks/BibsGK1G.js";import{p as ge}from"../chunks/BBaw3e_0.js";import{W as de}from"../chunks/DUw74D4v.js";import{e as V,i as q}from"../chunks/jBV541Un.js";import{i as te,s as ae}from"../chunks/DghzB7bT.js";import{p as X}from"../chunks/Cvh1FqXh.js";import{s as Y}from"../chunks/WXE6NR2k.js";import{s as N}from"../chunks/B887dx_8.js";import{E as fe}from"../chunks/XdW6OsGM.js";const Z=20,ve=async({url:x})=>{try{const e=x.searchParams.get("status"),k=x.searchParams.get("batch_id"),C=x.searchParams.get("page"),I=x.searchParams.get("limit"),R=k?parseInt(k):void 0,f=C?parseInt(C):1,P=I?parseInt(I):Z;if(f<1||P<1)throw new Error("Invalid pagination parameters");const c={page:f,rows_per_page:P},u=!0;let h;return e&&Object.values(A).includes(e)?h=await Q.getWorkflowRunsByStatus(e,R,c,u):h=await Q.getWorkflowRuns(R,c,u),{workflowRuns:h,filters:{status:e,batchId:R},pagination:{page:f,limit:P}}}catch(e){return console.error("Failed to load workflows:",e),{workflowRuns:[],filters:{status:null,batchId:void 0},pagination:{page:1,limit:Z},error:e}}},Te=Object.freeze(Object.defineProperty({__proto__:null,load:ve},Symbol.toStringTag,{value:"Module"}));var me=w("<option> </option>"),he=w('<button type="button" class="inline-flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Refresh</button>'),_e=w('<div class="flex items-center justify-between gap-4 rounded-lg bg-white p-4 shadow"><div class="flex items-center gap-4"><label for="status-filter" class="text-sm font-medium text-gray-700">Status:</label> <select id="status-filter" class="rounded-md border-gray-300 py-2 pl-3 pr-10 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"></select></div> <!></div>');function Pe(x,e){J(e,!0);let k=X(e,"currentStatus",3,"all"),C=X(e,"showRefresh",3,!0);const I=[{value:"all",label:"All"},{value:A.PENDING,label:"Pending"},{value:A.RUNNING,label:"Running"},{value:A.COMPLETED,label:"Completed"},{value:A.ERROR,label:"Error"},{value:A.FAILED,label:"Failed"}];function R(g){const d=g.target.value;e.onStatusChange&&e.onStatusChange(d)}function f(){e.onRefresh&&e.onRefresh()}var P=_e(),c=l(P),u=m(l(c),2);u.__change=R,V(u,21,()=>I,q,(g,v)=>{var d=me(),F=l(d,!0);s(d);var O={};U(()=>{B(F,t(v).label),O!==(O=t(v).value)&&(d.value=(d.__value=t(v).value)??"")}),_(g,d)}),s(u);var h;te(u),s(c);var j=m(c,2);{var M=g=>{var v=he();v.__click=f,_(g,v)};H(j,g=>{C()&&e.onRefresh&&g(M)})}s(P),U(()=>{h!==(h=k())&&(u.value=(u.__value=k())??"",ae(u,k()))}),_(x,P),K()}$(["change","click"]);var be=w("<option> </option>"),we=w('<span class="px-3 py-2 text-sm text-gray-700">...</span>'),xe=w('<button type="button"> </button>'),ke=w('<div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between rounded-lg bg-white p-4 shadow"><div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:gap-6"><div class="text-sm text-gray-700">Showing <span class="font-medium"> </span> to <span class="font-medium"> </span> of <span class="font-medium"> </span> results</div> <div class="flex items-center gap-2"><label for="page-size" class="text-sm text-gray-700">Rows per page:</label> <select id="page-size" class="rounded-md border-gray-300 py-1.5 pl-3 pr-8 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"></select></div></div> <nav class="flex items-center gap-1" aria-label="Pagination"><button type="button" aria-label="Previous page"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <!> <button type="button" aria-label="Next page"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></nav></div>');function ye(x,e){J(e,!0);const k=[20,50,100],C=D(()=>(e.currentPage-1)*e.itemsPerPage+1),I=D(()=>Math.min(e.currentPage*e.itemsPerPage,e.totalItems)),R=D(()=>{const a=[];if(e.totalPages<=7)for(let n=1;n<=e.totalPages;n++)a.push(n);else{a.push(1),e.currentPage>3&&a.push("...");const n=Math.max(2,e.currentPage-1),y=Math.min(e.totalPages-1,e.currentPage+1);for(let E=n;E<=y;E++)a.push(E);e.currentPage<e.totalPages-2&&a.push("..."),a.push(e.totalPages)}return a});function f(a){var r;a!==e.currentPage&&a>=1&&a<=e.totalPages&&((r=e.onPageChange)==null||r.call(e,a))}function P(a){var y;const r=a.target,n=parseInt(r.value);(y=e.onPageSizeChange)==null||y.call(e,n)}function c(){e.currentPage>1&&f(e.currentPage-1)}function u(){e.currentPage<e.totalPages&&f(e.currentPage+1)}var h=ke(),j=l(h),M=l(j),g=m(l(M)),v=l(g,!0);s(g);var d=m(g,2),F=l(d,!0);s(d);var O=m(d,2),T=l(O,!0);s(O),ie(),s(M);var o=m(M,2),i=m(l(o),2);i.__change=P,V(i,21,()=>k,q,(a,r)=>{var n=be(),y=l(n,!0);s(n);var E={};U(()=>{B(y,t(r)),E!==(E=t(r))&&(n.value=(n.__value=t(r))??"")}),_(a,n)}),s(i);var b;te(i),s(o),s(j);var z=m(j,2),p=l(z);p.__click=c;var G=m(p,2);V(G,17,()=>t(R),q,(a,r)=>{var n=oe(),y=ee(n);{var E=W=>{var S=we();_(W,S)},re=W=>{var S=xe();S.__click=()=>f(t(r));var ne=l(S,!0);s(S),U(()=>{N(S,1,`min-w-[2.5rem] px-3 py-2 text-sm font-medium rounded-md
            ${t(r)===e.currentPage?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}`),Y(S,"aria-label",`Page ${t(r)??""}`),Y(S,"aria-current",t(r)===e.currentPage?"page":void 0),B(ne,t(r))}),_(W,S)};H(y,W=>{t(r)==="..."?W(E):W(re,!1)})}_(a,n)});var L=m(G,2);L.__click=u,s(z),s(h),U(()=>{B(v,t(C)),B(F,t(I)),B(T,e.totalItems),b!==(b=e.itemsPerPage)&&(i.value=(i.__value=e.itemsPerPage)??"",ae(i,e.itemsPerPage)),p.disabled=e.currentPage===1,N(p,1,`inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-md
        ${e.currentPage===1?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}`),L.disabled=e.currentPage===e.totalPages,N(L,1,`inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-md
        ${e.currentPage===e.totalPages?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}`)}),_(x,h),K()}$(["change","click"]);var Re=w('<div class="mt-6"><!></div>'),Se=w('<div class="mt-6"><!></div>'),Ce=w('<div class="mt-6"><!></div> <div class="mt-6"><!></div> <!>',1),Ie=w('<div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8"><!> <!></div>');function Ne(x,e){J(e,!0);const k=()=>ue(ge,"$page",C),[C,I]=le(),R=D(()=>e.data.filters.status||"all"),f=D(()=>e.data.workflowRuns!==null&&typeof e.data.workflowRuns=="object"&&"items"in e.data.workflowRuns),P=D(()=>t(f)?e.data.workflowRuns.items:e.data.workflowRuns),c=D(()=>t(f)?{currentPage:e.data.workflowRuns.page,totalPages:e.data.workflowRuns.total_pages,totalItems:e.data.workflowRuns.total,itemsPerPage:e.data.workflowRuns.rows_per_page}:null);function u(o){const i=new URL(k().url);Object.entries(o).forEach(([b,z])=>{z===null?i.searchParams.delete(b):i.searchParams.set(b,z)}),ce(i.toString())}function h(o){u({status:o==="all"?null:o,page:"1"})}function j(o){u({page:String(o)})}function M(o){u({limit:String(o),page:"1"})}function g(){window.location.reload()}var v=Ie(),d=l(v);se(d,{title:"Workflow Runs",description:"Monitor workflow runs and their status"});var F=m(d,2);{var O=o=>{var i=Re(),b=l(i);fe(b,{get error(){return e.data.error},retry:g}),s(i),_(o,i)},T=o=>{var i=Ce(),b=ee(i),z=l(b);Pe(z,{get currentStatus(){return t(R)},onStatusChange:h,onRefresh:g}),s(b);var p=m(b,2),G=l(p);de(G,{get workflows(){return t(P)}}),s(p);var L=m(p,2);{var a=r=>{var n=Se(),y=l(n);ye(y,{get currentPage(){return t(c).currentPage},get totalPages(){return t(c).totalPages},get totalItems(){return t(c).totalItems},get itemsPerPage(){return t(c).itemsPerPage},onPageChange:j,onPageSizeChange:M}),s(n),_(r,n)};H(L,r=>{t(f)&&t(c)&&r(a)})}_(o,i)};H(F,o=>{e.data.error?o(O):o(T,!1)})}s(v),_(x,v),K(),I()}export{Ne as component,Te as universal};

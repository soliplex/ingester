# haiku.rag configuration file
# See https://ggozad.github.io/haiku.rag/configuration/ for details

environment: production
storage:
  data_dir: db
  vacuum_retention_seconds: 5
monitor:
  directories: []
  ignore_patterns: []
  include_patterns: []
  delete_orphans: false
lancedb:
  uri: ''
  api_key: ''
  region: ''
embeddings:
  model:
    provider: ollama
    name: qwen3-embedding:4b
    vector_dim: 2560
reranking:
  model: null
qa:
  model:
    provider: ollama
    name: gpt-oss
    enable_thinking: false
    temperature: null
    max_tokens: null
  max_sub_questions: 3
  max_iterations: 2
  max_concurrency: 1
research:
  model:
    provider: ollama
    name: gpt-oss
    enable_thinking: false
    temperature: null
    max_tokens: null
  max_iterations: 3
  confidence_threshold: 0.8
  max_concurrency: 1
processing:
  chunk_size: 256

  max_context_items: 25
  max_context_chars: 10000
  converter: docling-local
  chunker: docling-local
  chunker_type: hybrid
  chunking_tokenizer: Qwen/Qwen3-Embedding-0.6B
  chunking_merge_peers: true
  chunking_use_markdown_tables: false
  conversion_options:
    do_ocr: true
    force_ocr: false
    ocr_lang: []
    do_table_structure: true
    table_mode: accurate
    table_cell_matching: true
    images_scale: 2.0
    picture_description:
      enabled: true                  # Enable VLM picture description
      model:
        provider: ollama             # ollama, openai, or custom
        name: ministral-3            # VLM model name
      prompt: "Describe this image in detail. Be precise and concise."
      timeout: 90                    # Request timeout in seconds

search:
  vector_index_metric: cosine
  vector_refine_factor: 30
providers:
  ollama:
    base_url: http://localhost:11434
  vllm:
    embeddings_base_url: ''
    rerank_base_url: ''
    qa_base_url: ''
    research_base_url: ''
  lm_studio:
    base_url: http://localhost:1234
  docling_serve:
    base_url: http://localhost:5001
    api_key: ''
    timeout: 300
agui:
  host: 0.0.0.0
  port: 8000
  cors_origins:
  - '*'
  cors_credentials: true
  cors_methods:
  - GET
  - POST
  - OPTIONS
  cors_headers:
  - '*'
